{{!--
    Trailer Parts Unlimited - Conversion-Optimized Footer
    
    Architecture:
    1. Pre-footer "Fitment Help" band with CTAs
    2. Four-column link structure (accordion on mobile)
    3. Newsletter capture with segment dropdown
    4. Bottom bar with payments, shipping, legal, and compliance
    
    React component handles interactivity (accordion, newsletter, tracking)
    Fallback HTML provided for no-JS environments
--}}

{{#if banners.bottom}}
    <div class="banners" data-banner-location="bottom">
        {{#each (limit banners.bottom_metadata 1)}}
            <div class="banner" data-event-type="promotion" data-entity-id="{{this.id}}" data-name="{{this.banner-name}}" data-position="{{this.location}}">
                <div data-event-type="promotion-click">
                    {{{this.content}}}
                </div>
            </div>
        {{/each}}
    </div>
{{/if}}

{{!-- React Footer Mount Point --}}
<div id="tpu-footer-root" 
     data-phone-number="{{settings.phone_number}}"
     data-whatsapp-number="15551234567"
     data-subscribe-url="{{urls.subscribe.action}}"
     data-customer-email="{{customer.email}}"
     data-store-name="{{settings.store_name}}"
     data-show-compliance="false"
     aria-hidden="true">
    {{!-- React component will render here --}}
</div>

{{!-- No-JS Fallback Footer --}}
<noscript>
<footer class="footer tpu-footer" role="contentinfo">
    <h2 class="footer-title-sr-only">{{lang 'footer.title'}}</h2>
    
    {{!-- Fitment Help Band --}}
    {{> components/common/footer-fitment-band}}
    
    <div class="container">
        <div class="tpu-footer-main">
            {{!-- 4-Column Links --}}
            {{> components/common/footer-columns}}
            
            {{!-- Newsletter Capture --}}
            {{#if settings.show_newsletter_box}}
                {{> components/common/footer-newsletter}}
            {{/if}}
        </div>
    </div>
    
    {{!-- Bottom Bar --}}
    {{> components/common/footer-bottom}}
    
    {{#if theme_settings.show_powered_by}}
        <div class="container">
            <div class="footer-copyright">
                <p class="powered-by">{{lang 'footer.powered_by'}} <a href="https://www.bigcommerce.com?utm_source=merchant&amp;utm_medium=poweredbyBC" rel="nofollow">BigCommerce</a></p>
            </div>
        </div>
    {{/if}}
    
    {{{region name="ssl_site_seal--global"}}}
</footer>
</noscript>

{{!-- JS-Enabled Footer (hidden by default, shown when React loads) --}}
<footer class="footer tpu-footer tpu-footer--js" role="contentinfo" style="display: none;">
    <h2 class="footer-title-sr-only">{{lang 'footer.title'}}</h2>
    
    {{!-- Fitment Help Band - Fallback content, replaced by React --}}
    <div id="tpu-footer-fitment-fallback">
        {{> components/common/footer-fitment-band}}
    </div>
    
    <div class="container">
        <div class="tpu-footer-main">
            {{!-- 4-Column Links - Fallback content, replaced by React --}}
            <div id="tpu-footer-columns-fallback">
                {{> components/common/footer-columns}}
            </div>
            
            {{!-- Newsletter Capture - Fallback content, replaced by React --}}
            {{#if settings.show_newsletter_box}}
                <div id="tpu-footer-newsletter-fallback">
                    {{> components/common/footer-newsletter}}
                </div>
            {{/if}}
        </div>
    </div>
    
    {{!-- Bottom Bar - Fallback content, replaced by React --}}
    <div id="tpu-footer-bottom-fallback">
        {{> components/common/footer-bottom}}
    </div>
    
    {{#if theme_settings.show_powered_by}}
        <div class="container">
            <div class="footer-copyright">
                <p class="powered-by">{{lang 'footer.powered_by'}} <a href="https://www.bigcommerce.com?utm_source=merchant&amp;utm_medium=poweredbyBC" rel="nofollow">BigCommerce</a></p>
            </div>
        </div>
    {{/if}}
    
    {{{region name="ssl_site_seal--global"}}}
</footer>

{{!-- Inject footer data for React component --}}
{{inject "footerPhoneNumber" settings.phone_number}}
{{inject "footerStoreName" settings.store_name}}
{{inject "footerSubscribeUrl" urls.subscribe.action}}
